<div class="content-container">
  <div class="incident-log-entry" *ngFor="let logEntry of incidentLogList">
    <div class="incident-log-entry--content">
      <span class="date">{{ formatTime(logEntry.createDate) }}</span>
      <span class="message">{{ logEntry.message }}</span>
    </div>
    <div class="incident-log-entry--expand-button">
      <i *ngIf="!isExpanded(logEntry.id)" (click)="expanded.push(logEntry.id)" aria-hidden="true" class="ri-arrow-right-s-line"></i>
      <i *ngIf="isExpanded(logEntry.id)" (click)="expanded.splice(expanded.indexOf(logEntry.id), 1)" aria-hidden="true" class="ri-arrow-down-s-line"></i>
    </div>
    <div *ngIf="isExpanded(logEntry.id)" class="incident-log-entry--expanded-block">
      <div
        *ngIf="logEntry.eventType === 'INCIDENT_STATUS'"
      >New status: {{ getStatusText(logEntry.incidentStatus) }}</div>
      <map-incident-log-entry-poll
        *ngIf="logEntry.relatedObjectType === 'POLL'"
        [poll]="incidentLog.relatedObjects.polls[logEntry.relatedObjectId]"
        [userTimezone]="userTimezone"
      ></map-incident-log-entry-poll>
      <map-incident-log-entry-position
        *ngIf="logEntry.relatedObjectType === 'MOVEMENT'"
        [position]="incidentLog.relatedObjects.positions[logEntry.relatedObjectId]"
        [incidentClosed]="logEntry.eventType === 'INCIDENT_CLOSED'"
        [userTimezone]="userTimezone"
      ></map-incident-log-entry-position>
      <map-incident-log-entry-note
        *ngIf="logEntry.relatedObjectType === 'NOTE'"
        [note]="incidentLog.relatedObjects.notes[logEntry.relatedObjectId]"
      ></map-incident-log-entry-note>
    </div>
  </div>
</div>
