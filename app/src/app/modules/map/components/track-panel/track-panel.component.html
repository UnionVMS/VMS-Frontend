<div class="track-panel-wrapper">

  <div class="trackColumnSetting button-block" *ngIf="!hideTrackColumnSetting">
    <legend>Filter columns:</legend>
    <ui-button-toggle
      [label]="trackPanelColumn.columnName"
      [value]="isColumnVisible(trackPanelColumn.id)"
      [switchFunction]="toggleColumnSettingFactory(trackPanelColumn.id)"
      *ngFor="let trackPanelColumn of trackPanelColumns"
    ></ui-button-toggle>
  </div>

  <div class="content-container {{hidePanel ? 'hidden' : ''}}">

    <ng-template [ngIf]="!hidePanel">
      <div class="track-panel-header">
        <ui-button-close [clickFunction]="toggleVisibility"></ui-button-close>
        <button class="btnCustomColumn btn btn-primary" (click)="toggleTrackColumnSetting()">
          <i class="fas fa-filter"></i>
        </button>
      </div>

      <table class="table track-table">
        <thead>
          <tr>
            <th [hidden]="!isColumnVisible(trackPanelColumn.id)" *ngFor="let trackPanelColumn of trackPanelColumns">{{ trackPanelColumn.columnName }}</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let positionKey of positionKeys()">
            <td [hidden]="!isColumnVisible(1)">{{positionKey}}</td>
            <td [hidden]="!isColumnVisible(2)">{{positions[positionKey].location.latitude.toFixed(5)}}</td>
            <td [hidden]="!isColumnVisible(3)">{{positions[positionKey].location.longitude.toFixed(5)}}</td>
            <td [hidden]="!isColumnVisible(4)">{{positions[positionKey].heading.toFixed(2)}}</td>
            <td [hidden]="!isColumnVisible(5)">{{positions[positionKey].speed.toFixed(2)}}</td>
            <td [hidden]="!isColumnVisible(6)">{{getFormatedDate(positions[positionKey].timestamp)}}</td>
            <td [hidden]="!isColumnVisible(7)">{{positions[positionKey].source}}</td>
            <td><i class="fas fa-trash" aria-hidden="true" (click)="removePositionForInspection(positionKey)"></i></td>
          </tr>
        </tbody>
      </table>
    </ng-template>
  </div>
</div>
<button class="show-button btn btn-primary" *ngIf="hidePanel" (click)="hidePanel = !hidePanel">
  <i class="fas fa-chevron-up"></i>
</button>
